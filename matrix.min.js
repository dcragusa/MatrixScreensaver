const r="abcdefghijklmnopqrstuvwxyz123456789890~!#$%^&*()-_=+[]{};:'\",.<>/?\\|".split("");const c=11;const f=19;const w=4;function i(s){return new Promise(t=>setTimeout(t,s))}function l(t){return Math.floor(Math.random()*t)}class s{constructor(t,s){this.t(t);this.delay=l(s*w*2);this.speed=!l(4)?1:0;this.position=0}t(s){this.i=[];for(let t=0;t<s;t++){this.i.push(r[l(r.length)])}}}class h{constructor(){this.c=document.getElementById("c");this.h=this.c.getContext("2d")}o(t,s,i){this.h.fillText(t,s,i)}l(t,s){this.h.clearRect(t,s,c,f)}u(){this.h.clearRect(0,0,this.c.width,this.c.height)}async m(t,s){await i(!l(3)?100:300);this.o(t[s],s*(c+2)+30,40);return s===t.length-1?true:this.m(t,s+1)}async p(){this.h.font="22px matrix_courier";this.h.fillStyle="#7bff8d";await i(500);await this.m("Wake up, Neo...".split(""),0);await i(2e3);this.u();await this.m("The Matrix has you...".split(""),0);await i(2e3);this.u()}M(){this.c.width=window.innerWidth;this.c.height=window.innerHeight;this.C=Math.floor(this.c.width/c)+1;this.g=Math.floor(this.c.height/f)+1;this.columns=[];for(let t=0;t<this.C;t++)this.columns.push(new s(this.C,this.g))}k(){this.h.font="20px matrix_code";for(let s=0;s<this.columns.length;s++){const i=this.columns[s];if(i.delay){i.delay--;continue}for(let t=0;t<i.i.length;t++){const h=i.i[t];const e=s*c;const a=t*f;const n=a+f;if(t>i.position){break}else if(t===i.position){this.l(e,a);this.h.fillStyle="#f6f6f4";this.o(h,e,n)}else if(t===i.position-1){this.l(e,a);this.h.fillStyle="#c9cfb9";this.o(h,e,n)}else if(t===i.position-2){this.l(e,a);this.h.fillStyle="#95a297";this.o(h,e,n)}else if(t===i.position-3){this.l(e,a);this.h.fillStyle="#2cb231";this.o(h,e,n)}else if(t<i.position-3&&t>=i.position-this.g+10&&!l(15)){const o=r[l(r.length)];this.l(e,a);this.h.fillStyle="#2cb231";this.o(o,e,n)}else if(t<i.position-this.g+10&&t>i.position-this.g-10){this.h.fillStyle=!l(5)?"rgba(0, 0, 0, 0.30)":"rgba(0, 0, 0, 0.05)";this.h.fillRect(s*c,t*f,c,f)}else if(t===i.position-this.g-10)this.l(e,a)}i.delay=i.speed;i.position++;if(i.position>this.g*2+10){i.t(this.g);i.position=0;i.delay=l(this.C*w/2)}}}}window.addEventListener("load",async function(){let t=new h;await t.p();window.addEventListener("resize",t.M.bind(t),false);t.M();window.setInterval(t.k.bind(t),40)});
